\begin{definition}[Syntax of Core]
    \[
      \begin{array}{rcll}
        p & \coloneqq & x \mid \lit{n} \mid \mu\alpha.s \mid K\ \sigma \mid \cocase{\overline{D\ \Gamma \Rightarrow s}} & \emph{Producers}\\
        c & \coloneqq & \alpha \mid \tilde{\mu}x.s \mid D\ \sigma \mid \case{\overline{K\ \Gamma \Rightarrow s}}& \emph{Consumers}\\
        s & \coloneqq & \cut{p}{c} \mid \odot(p, p; c) \mid \ifz{p}{s}{s} \mid f\ \sigma\mid \done & \emph{Statements}\\
        \sigma & \coloneqq & \nil \mid \sigma, p \mid \sigma, c & \emph{Substitutions}\\
        \Gamma & \Coloneqq & \emptyset \mid \Gamma, x \prd \tau \mid \Gamma, \alpha \cnt \tau & \emph{Typing Contexts} \\
        \delta & \coloneqq & \mathbf{data}\ T\ \{ \overline{K\ \Gamma} \} & \emph{Data Type Definition}\\
        & \mid & \mathbf{codata}\ T\ \{ \overline{D\ \Gamma }\} & \emph{Codata Type Definition}\\
        & \mid & \defi{f\ \Gamma}{s} & \emph{Top-Level Definitions}\\
       \Theta & \coloneqq & \overline{\delta} & \emph{Programs}\\
     \end{array}
    \]
  \end{definition}

%%
%% Subsec: Typing Rules
%%
\subsection{Typing Rules}
\label{subsec:core:typing-rules}

  \begin{minipage}{0.21\textwidth}
    \begin{prooftree}
      \AxiomC{$\Theta\mid\Gamma,\alpha\cnt \tau \vdash s$}
      \RightLabel{\textsc{$\mu$}}
      \UnaryInfC{$\Theta\mid\Gamma \vdash \mu\alpha.s\prd\tau$}
    \end{prooftree}
  \end{minipage}
  \hfill
  \begin{minipage}{0.21\textwidth}
    \begin{prooftree}
      \AxiomC{$\Theta\mid\Gamma,x\prd\tau \vdash s$}
      \RightLabel{\textsc{$\tilde{\mu}$}}
      \UnaryInfC{$\Theta\mid\Gamma \vdash \tilde{\mu}x.s \cnt \tau$}
    \end{prooftree}
  \end{minipage}
  \hfill
   \begin{minipage}{0.21\textwidth}
    \begin{prooftree}
      \AxiomC{$x\prd\tau\in\Gamma$}
      \RightLabel{\textsc{Var$_1$}}
      \UnaryInfC{$\Theta\mid\Gamma \vdash x\prd\tau$}
    \end{prooftree}
  \end{minipage}
  \hfill
  \begin{minipage}{0.21\textwidth}
    \begin{prooftree}
      \AxiomC{$\alpha\cnt\tau\in\Gamma$}
      \RightLabel{\textsc{Var$_2$}}
      \UnaryInfC{$\Theta\mid\Gamma \vdash \alpha \cnt \tau$}
    \end{prooftree}
  \end{minipage}
  \hfill
  \vspace{1em}

  \begin{minipage}{0.45\textwidth}
    \begin{prooftree}
      \AxiomC{$\Theta\mid\Gamma \vdash p \prd\tau$}
      \AxiomC{$\Theta\mid\Gamma \vdash c \cnt \tau$}
      \RightLabel{\textsc{Cut}}
      \BinaryInfC{$\Theta\mid\Gamma \vdash \cut{p}{c}$}
    \end{prooftree}
  \end{minipage}
  \hfill
  \begin{minipage}{0.45\textwidth}
    \begin{prooftree}
      \AxiomC{$\Theta\mid\Gamma \vdash p \prd \tyint$}
      \AxiomC{$\Theta\mid\Gamma \vdash s_1$}
      \AxiomC{$\Theta\mid\Gamma \vdash s_2$}
      \RightLabel{\textsc{IfZ}}
      \TrinaryInfC{$\Theta\mid\Gamma \vdash \ifz{p}{s_1}{s_2}$}
    \end{prooftree}
  \end{minipage}
  \hfill
  \vspace{1em}


  \begin{minipage}{0.35\textwidth}
    \begin{prooftree}
      \AxiomC{\quad}
      \RightLabel{\textsc{Lit}}
      \UnaryInfC{$\Theta\mid\Gamma \vdash \lit{n} \prd \tyint$}
    \end{prooftree}
  \end{minipage}
  \hfill
  \begin{minipage}{0.6\textwidth}
    \begin{prooftree}
      \AxiomC{$\Theta\mid\Gamma \vdash p_1 \prd \tyint$}
      \AxiomC{$\Theta\mid\Gamma \vdash p_2 \prd \tyint$}
      \AxiomC{$\Theta\mid\Gamma \vdash c \cnt \tyint$}
      \RightLabel{\textsc{binop}}
      \TrinaryInfC{$\Theta\mid\Gamma \vdash \odot(p_1,p_2;c)$}
    \end{prooftree}
  \end{minipage}
  \hfill
  \vspace{1em}

  \begin{minipage}{\textwidth}
    \begin{prooftree}
      \AxiomC{$\mathbf{def}\ f\ \Gamma^{\prime} \in \Theta$}
      \AxiomC{$\Theta\mid\Gamma \vdash \sigma : \Gamma^{\prime}$}
      \RightLabel{\textsc{Call}}
      \BinaryInfC{$\Theta\mid\Gamma \vdash f\ \sigma$}
    \end{prooftree}
  \end{minipage}
  \hfill
  \vspace{1em}
  \hfill
  \vspace{1em}
  \begin{minipage}{\textwidth}
    \begin{prooftree}
      \AxiomC{$\mathbf{data}\ \{K\ \Gamma^{\prime},\dots\}\in\Gamma$}
      \AxiomC{$\Theta\mid\Gamma \vdash \sigma : \Gamma^{\prime}$}
      \RightLabel{\textsc{Constructor}}
      \BinaryInfC{$\Theta\mid\Gamma \vdash K\ \sigma \prd T$}
    \end{prooftree}
  \end{minipage}
  \hfill
  \vspace{1em}
  \begin{minipage}{\textwidth}
    \begin{prooftree}
      \AxiomC{$\mathbf{data}\ \{\overline{K_i\ \Gamma_i}\}\in\Gamma$}
      \AxiomC{$\overline{\Theta\mid\Gamma,\Gamma_i\vdash s_i}$}
      \RightLabel{\textsc{Case}}
      \BinaryInfC{$\Theta\mid\Gamma \vdash \mathbf{case}\ \{ \overline{K_i\ \Gamma_i\Rightarrow s_i}\}  \cnt T$}
    \end{prooftree}
  \end{minipage}
  \hfill
  \vspace{1em}
  \begin{minipage}{\textwidth}
    \begin{prooftree}
      \AxiomC{$\mathbf{codata}\ \{D\ \Gamma^{\prime}, \dots\}\in\Gamma$}
      \AxiomC{$\Theta\mid\Gamma \vdash \sigma:\Gamma^{\prime}$}
      \RightLabel{\textsc{Destructor}}
      \BinaryInfC{$\Theta\mid\Gamma \vdash D\ \sigma \cnt T$}
    \end{prooftree}
  \end{minipage}
  \hfill
  \vspace{1em}
  \begin{minipage}{\textwidth}
    \begin{prooftree}
      \AxiomC{$\mathbf{codata}\ \{\overline{D_i\ \Gamma_i} \}\in\Gamma$}
      \AxiomC{$\overline{\Theta\mid\Gamma,\Gamma_i \vdash s_i}$}
      \RightLabel{\textsc{Cocase}}
      \BinaryInfC{$\Theta\mid\Gamma \vdash \mathbf{cocase}\ \{\overline{D_i\ \Gamma_i\Rightarrow s_i}\} \prd T $}
    \end{prooftree}
  \end{minipage}



  \hfill
  \vspace{1.5em}
  \rule{\textwidth}{0.4pt}
  \par
  \vspace{1em}
  \begin{minipage}{0.25\textwidth}
    \begin{prooftree}
      \AxiomC{}
      \RightLabel{\textsc{Wf-Empty}}
      \UnaryInfC{$\vdash \wellformed{\emptyset}$}
    \end{prooftree}
  \end{minipage}
  \hfill
  \begin{minipage}{0.7\textwidth}
    \begin{prooftree}
      \AxiomC{$\vdash \wellformed{\Theta}$}
      \AxiomC{$\Theta\mid\overline{x\prd\tau_i},\overline{\alpha\cnt\tau_j} \vdash s$}
      \RightLabel{\textsc{Wf-Fun}}
      \BinaryInfC{$\vdash \wellformed{\Theta,\mathbf{def}\ \text{f}(\overline{x_i\prd\tau_i},\overline{\alpha_j\cnt\tau_j}) \coloneq s}$}
    \end{prooftree}
  \end{minipage}
  \hfill
  \vspace{1em}
  \begin{minipage}{0.45\textwidth}
    \begin{prooftree}
      \AxiomC{$\vdash \wellformed{\Theta}$}
      \AxiomC{$\overline{K},T$ do not occur in $\Theta$}
      \RightLabel{\textsc{Wf-Data}}
      \BinaryInfC{$\vdash \wellformed{\Theta,\mathbf{data}\ T\ \{ \overline{K(\overline{x:\tau};\overline{\alpha:\tau})} \}}$}
    \end{prooftree}
  \end{minipage}
  \hfill
  \begin{minipage}{0.45\textwidth}
    \begin{prooftree}
      \AxiomC{$\vdash \wellformed{\Theta}$}
      \AxiomC{$\overline{D},T$ do not occur in $\Theta$}
      \RightLabel{\textsc{Wf-Codata}}
      \BinaryInfC{$\vdash \wellformed{\mathbf{codata}\ T\ \{ \overline{D(\overline{x:\tau};\overline{\alpha:\tau}) : \tau}\}}$}
    \end{prooftree}
  \end{minipage}

